<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Тест Струпа</title>
    <style>
        .main { text-align: center; background-color: #2F4F4F; margin: 20px; font-size: 26pt }
    </style>
</head>
<body>
<div class="main">
    <h1 style="color: #FFFACD">Тест Струпа</h1>
    <p>
        <span id="0-0"></span>
        <span id="0-1"></span>
        <span id="0-2"></span>
        <span id="0-3"></span>
        <span id="0-4"></span>
    </p>
    <p>
        <span id="1-0"></span>
        <span id="1-1"></span>
        <span id="1-2"></span>
        <span id="1-3"></span>
        <span id="1-4"></span>
    </p>
    <p>
        <span id="2-0"></span>
        <span id="2-1"></span>
        <span id="2-2"></span>
        <span id="2-3"></span>
        <span id="2-4"></span>
    </p>
    <p>
        <span id="3-0"></span>
        <span id="3-1"></span>
        <span id="3-2"></span>
        <span id="3-3"></span>
        <span id="3-4"></span>
    </p>
    <p>
        <span id="4-0"></span>
        <span id="4-1"></span>
        <span id="4-2"></span>
        <span id="4-3"></span>
        <span id="4-4"></span>
    </p>
    <input style="font-size: 26pt" id="refresh" type="submit" value="Refresh" />
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', (event) => {
        updateTestData();

        document.getElementById('refresh').onclick = function()
        {
            updateTestData();
        }

        function updateTest(data)
        {
            let index = 0;
            let spanTag = {};

            for (const [key, value] of Object.entries(data)) {

                for (const [word, color] of Object.entries(value)) {
                    spanTag = document.getElementById(String(key) + '-' + String(index));
                    spanTag.setAttribute("style", "color: " + color);
                    spanTag.textContent = word;

                    index++;
                }
                index = 0;
            }
        }

        function updateTestData()
        {
            $.ajax({
                url: '/src/index.php',
                method: 'POST',
                success: function(response){
                    updateTest(JSON.parse(response))
                },
                error() {
                    console.error('Error request!');
                },
            })
        }
    })
</script>
</body>
</html>